(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58ed0f46"],{"15cc":function(e,t,n){"use strict";n.r(t);var a=n("7a23");function r(e,t){var n=Object(a["A"])("YandexMap");return Object(a["s"])(),Object(a["e"])(n,{markers:e.locations},null,8,["markers"])}var o=Object(a["N"])("data-v-71604d39");Object(a["v"])("data-v-71604d39");var c=Object(a["i"])("div",{class:"map",id:"yandex-map"},null,-1);Object(a["t"])();var i,u=o((function(e,t,n,r,o,i){var u=Object(a["A"])("loader");return Object(a["s"])(),Object(a["e"])(a["a"],null,[c,Object(a["i"])(u,{id:"loader",showing:e.isLoading},null,8,["showing"])],64)}));n("a4d3"),n("e01a"),n("4160"),n("a9e3"),n("159b"),n("99af"),n("d3b7");(function(e){e["RU"]="ru_RU",e["EN"]="en_EN"})(i||(i={}));var s=function(e){var t=e.apiKey,n=e.lang,a=e.load,r=document.createElement("script");return r.setAttribute("src","https://api-maps.yandex.ru/2.1/?apikey=".concat(t,"&lang=").concat(n,"&load=").concat(a)),r.setAttribute("async",""),r.setAttribute("defer",""),r.setAttribute("id","ymaps-script"),document.head.appendChild(r)},l={lat:55.75396,lng:37.620393},d={apiKey:"8239b260-067a-4165-a7a4-e64e5d0c4bd2",lang:i.RU,load:"package.full",center:l,zoom:11},p=function(e){return new Promise((function(t,n){if(window.ymaps||document.getElementById("ymaps-script"))return t();var a=s(e);a.onload=function(){return ymaps.ready(t)},a.onerror=n}))},b=function(e){return[e.lat,e.lng]},f=n("2cea"),v=null,m=Object(a["j"])({components:{loader:f["a"]},props:{apiKey:{type:String,default:d.apiKey},lang:{type:String,default:d.lang},load:{type:String,default:d.load},zoom:{type:Number,default:d.zoom},center:{type:Object,default:d.center},markers:{type:Object,default:{}}},setup:function(e){var t=Object(a["x"])(!0);return Object(a["q"])((function(){p(e).then((function(){t.value=!1;var n=e.center,r=e.zoom;v=new ymaps.Map("yandex-map",{center:[n.lat,n.lng],zoom:r}),console.log("map initialized"),Object(a["K"])((function(){var t;console.log("markers in props changes observed"),null===(t=v)||void 0===t||t.geoObjects.removeAll(),y(e.markers).forEach((function(e){var t;return null===(t=v)||void 0===t?void 0:t.geoObjects.add(e)}))}))}))})),{isLoading:t}}}),g={preset:"islands#blueEducationCircleIcon"},h={preset:"islands#blueSportCircleIcon"},O={preset:"islands#blueHomeCircleIcon"},j={preset:"islands#blueCircleIcon"};function y(e){var t,n,a,r=new ymaps.GeoObjectCollection(void 0,g),o=new ymaps.GeoObjectCollection(void 0,h),c=new ymaps.GeoObjectCollection(void 0,O),i=new ymaps.GeoObjectCollection(void 0,j);for(var u in e)switch(u){case"campuses":null===(t=e[u])||void 0===t||t.forEach((function(e){return r.add(w(e))}));break;case"gyms":null===(n=e[u])||void 0===n||n.forEach((function(e){return o.add(w(e))}));break;case"hostels":null===(a=e[u])||void 0===a||a.forEach((function(e){return c.add(w(e))}));break;default:e[u].forEach((function(e){return i.add(w(e))}));break}return[r,o,c,i]}function w(e){return new ymaps.Placemark(b(e.coordinates),{hintContent:e.title,balloonContentHeader:e.title,balloonContentBody:e.description})}var k=m;n("d8d0");k.render=u,k.__scopeId="data-v-71604d39";var L=k,C=n("d4ec"),E=n("bee2"),A=(n("96cf"),n("1da1")),R=n("91a5"),U=n("2b2c"),x=function(){function e(){Object(C["a"])(this,e),this.URL_MODULE="/map",this.URL_MAP="/map"}return Object(E["a"])(e,[{key:"getLocations",value:function(){var e=Object(A["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=this.URL_MODULE+this.URL_MAP,e.next=4,R["b"].get(n);case 4:return a=e.sent,console.log("loaded",a.result),e.abrupt("return",U["a"].success(null!==(t=a.result)&&void 0!==t?t:{}));case 9:return e.prev=9,e.t0=e["catch"](0),console.log("an error occurred during locations request"),e.abrupt("return",U["a"].failure(e.t0));case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),_=function(){function e(){Object(C["a"])(this,e),this.api=new x}return Object(E["a"])(e,[{key:"getLocations",value:function(){return this.api.getLocations()}}]),e}(),M=function(){function e(){Object(C["a"])(this,e),this.remoteDataSource=new _}return Object(E["a"])(e,[{key:"getLocations",value:function(){return this.remoteDataSource.getLocations()}}]),e}(),S=function(){function e(){Object(C["a"])(this,e),this.repository=new M}return Object(E["a"])(e,[{key:"getLocations",value:function(){return this.repository.getLocations()}}]),e}(),z=new S,I=Object(a["j"])({components:{YandexMap:L},setup:function(){var e=Object(a["w"])({locations:{}});return z.getLocations().then((function(t){var n;t.isSuccess?e.locations=t.value.addresses:alert(null!==(n=t.errorOrNull())&&void 0!==n?n:"Неизвестная ошибка")})),e}}),K=I;K.render=r;t["default"]=K},"8d59":function(e,t,n){},d8d0:function(e,t,n){"use strict";n("8d59")}}]);
//# sourceMappingURL=chunk-58ed0f46.c7bcd00d.js.map