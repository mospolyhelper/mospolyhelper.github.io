(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cd089a2"],{"004f":function(e,t,r){"use strict";r("fc0b")},"5bba":function(e,t,r){e.exports=r.p+"img/attachment-diagonal-interface-symbol-of-paperclip.7b680923.svg"},"7b1d":function(e,t,r){},b137:function(e,t,r){"use strict";r("7b1d")},b64b:function(e,t,r){var n=r("23e7"),a=r("7b0b"),c=r("df75"),i=r("d039"),s=i((function(){c(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(e){return c(a(e))}})},d445:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=Object(n["N"])("data-v-736ae1b1");Object(n["v"])("data-v-736ae1b1");var c={class:"dialogs-list"},i=Object(n["i"])("h2",{class:"heading"},"Личные сообщения",-1);Object(n["t"])();var s=a((function(e,t,r,a,s,o){var u=Object(n["A"])("DialogPreview");return Object(n["s"])(),Object(n["e"])("div",c,[i,(Object(n["s"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(e.dialogs,(function(e){return Object(n["s"])(),Object(n["e"])(u,{key:e.id,dialog:e},null,8,["dialog"])})),128))])})),o=r("d4ec"),u=r("bee2"),b=(r("96cf"),r("1da1")),l=r("91a5"),d=r("2b2c"),f=r("9c79"),O=r("12f9"),g=function(){function e(){Object(o["a"])(this,e),this.URL_MODULE="/account",this.URL_DIALOGS="/dialogs",this.session=new O["a"]}return Object(u["a"])(e,[{key:"getDialogs",value:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=this.URL_MODULE+this.URL_DIALOGS,n={additionalHeaders:{sessionId:this.session.getSessionId()}},e.next=5,l["a"].get(r,n);case 5:return a=e.sent,console.log("loaded",a.result),e.abrupt("return",d["a"].success(null!==(t=a.result)&&void 0!==t?t:[]));case 10:if(e.prev=10,e.t0=e["catch"](0),401!=e.t0["statusCode"]){e.next=16;break}return e.abrupt("return",d["a"].failure(new f["a"]("Авторизируйтесь!")));case 16:return e.abrupt("return",d["a"].failure(e.t0));case 17:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),j=function(){function e(){Object(o["a"])(this,e),this.api=new g}return Object(u["a"])(e,[{key:"getDialogs",value:function(){return this.api.getDialogs()}}]),e}(),p=function(){function e(){Object(o["a"])(this,e),this.remoteDataSource=new j}return Object(u["a"])(e,[{key:"getDialogs",value:function(){return this.remoteDataSource.getDialogs()}}]),e}(),v=function(){function e(){Object(o["a"])(this,e),this.repository=new p}return Object(u["a"])(e,[{key:"getDialogs",value:function(){return this.repository.getDialogs()}}]),e}(),h=r("5bba"),m=r.n(h),y=Object(n["N"])("data-v-8f421700");Object(n["v"])("data-v-8f421700");var w={class:"receiver"},D={class:"sender"},k={id:"receiver-name"},L={key:0,id:"unread-dot"},P={class:"date"},_={id:"identity"},U={key:1,id:"name"},I={key:0,id:"attachments-icon",src:m.a};Object(n["t"])();var S=y((function(e,t){return Object(n["s"])(),Object(n["e"])("div",{class:"preview",onClick:t[1]||(t[1]=function(){return e.openDialogPage&&e.openDialogPage.apply(e,arguments)})},[Object(n["i"])("div",w,[Object(n["i"])("img",{id:"avatar",src:e.IMG_BASE_URL+e.dialog.avatarUrl},null,8,["src"])]),Object(n["i"])("div",D,[Object(n["i"])("div",null,[Object(n["i"])("span",k,Object(n["C"])(e.author),1),e.dialog.hasRead?Object(n["f"])("",!0):(Object(n["s"])(),Object(n["e"])("span",L)),Object(n["i"])("span",P,Object(n["C"])(e.dialog.date),1)]),Object(n["i"])("div",_,[e.dialog.senderImageUrl?(Object(n["s"])(),Object(n["e"])("img",{key:0,id:"avatar",src:e.IMG_BASE_URL+e.dialog.senderImageUrl},null,8,["src"])):Object(n["f"])("",!0),e.dialog.senderName?(Object(n["s"])(),Object(n["e"])("span",U,Object(n["C"])(e.dialog.senderName),1)):Object(n["f"])("",!0)]),Object(n["i"])("div",{style:{marginLeft:e.messageLeftMargin}},[e.dialog.hasAttachments?(Object(n["s"])(),Object(n["e"])("img",I)):Object(n["f"])("",!0),Object(n["i"])("span",{id:"message",innerHTML:e.dialog.message},null,8,["innerHTML"])],4)])])}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=Object(n["j"])({props:{dialog:{type:Object,required:!0}},data:function(){return{IMG_BASE_URL:"https://e.mospolytech.ru/"}},methods:{openDialogPage:function(){}},setup:function(e){var t=Object(n["w"])({}),r=e.dialog,a=Object(n["c"])((function(){return r.authorName+(r.authorGroup?" – ".concat(r.authorGroup):"")})),c=Object(n["c"])((function(){return r.senderImageUrl&&r.senderName?"35px":"0px"}));return A(A({},Object(n["D"])(t)),{},{author:a,messageLeftMargin:c})}}),G=E;r("004f");G.render=S,G.__scopeId="data-v-8f421700";var N=G,x=new v,C=Object(n["j"])({components:{DialogPreview:N},setup:function(){var e=Object(n["w"])({dialogs:[]});return x.getDialogs().then((function(t){if(t.isSuccess)e.dialogs=t.value;else if(t.isFailure){var r=t.errorOrNull();r&&alert(r)}})),e}}),B=C;r("b137");B.render=s,B.__scopeId="data-v-736ae1b1";t["default"]=B},dbb4:function(e,t,r){var n=r("23e7"),a=r("83ab"),c=r("56ef"),i=r("fc6a"),s=r("06cf"),o=r("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,n=i(e),a=s.f,u=c(n),b={},l=0;while(u.length>l)r=a(n,t=u[l++]),void 0!==r&&o(b,t,r);return b}})},e439:function(e,t,r){var n=r("23e7"),a=r("d039"),c=r("fc6a"),i=r("06cf").f,s=r("83ab"),o=a((function(){i(1)})),u=!s||o;n({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return i(c(e),t)}})},fc0b:function(e,t,r){}}]);
//# sourceMappingURL=chunk-1cd089a2.b7481985.js.map