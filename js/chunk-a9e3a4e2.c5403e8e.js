(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a9e3a4e2"],{"15cc":function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t){var n=Object(r["z"])("YandexMap");return Object(r["r"])(),Object(r["d"])(n,{markers:e.locations},null,8,["markers"])}var o=Object(r["L"])("data-v-38cbc64e");Object(r["u"])("data-v-38cbc64e");var c={class:"map",id:"yandex-map"};Object(r["s"])();var i,u=o((function(e,t,n,a,o,i){return Object(r["r"])(),Object(r["d"])("div",c)}));n("a4d3"),n("e01a"),n("4160"),n("a9e3"),n("159b"),n("99af"),n("d3b7");(function(e){e["RU"]="ru_RU",e["EN"]="en_EN"})(i||(i={}));var s=function(e){var t=e.apiKey,n=e.lang,r=e.load,a=document.createElement("script");return a.setAttribute("src","https://api-maps.yandex.ru/2.1/?apikey=".concat(t,"&lang=").concat(n,"&load=").concat(r)),a.setAttribute("async",""),a.setAttribute("defer",""),a.setAttribute("id","ymaps-script"),document.head.appendChild(a)},l={lat:55.75396,lng:37.620393},d={apiKey:"8239b260-067a-4165-a7a4-e64e5d0c4bd2",lang:i.RU,load:"package.full",center:l,zoom:11},p=function(e){return new Promise((function(t,n){if(window.ymaps||document.getElementById("ymaps-script"))return t();var r=s(e);r.onload=function(){return ymaps.ready(t)},r.onerror=n}))},f=function(e){return[e.lat,e.lng]},b=null,v=Object(r["i"])({props:{apiKey:{type:String,default:d.apiKey},lang:{type:String,default:d.lang},load:{type:String,default:d.load},zoom:{type:Number,default:d.zoom},center:{type:Object,default:d.center},markers:{type:Object,default:{}}},setup:function(e){Object(r["p"])((function(){p(e).then((function(){var t=e.center,n=e.zoom;b=new ymaps.Map("yandex-map",{center:[t.lat,t.lng],zoom:n}),console.log("map initialized"),Object(r["I"])((function(){var t;console.log("markers in props changes observed"),null===(t=b)||void 0===t||t.geoObjects.removeAll(),h(e.markers).forEach((function(e){var t;return null===(t=b)||void 0===t?void 0:t.geoObjects.add(e)}))}))}))}))}}),m={preset:"islands#blueEducationCircleIcon"},g={preset:"islands#blueSportCircleIcon"},y={preset:"islands#blueHomeCircleIcon"};function h(e){var t,n,r,a=new ymaps.GeoObjectCollection(void 0,m),o=new ymaps.GeoObjectCollection(void 0,g),c=new ymaps.GeoObjectCollection(void 0,y);return null===(t=e.campuses)||void 0===t||t.forEach((function(e){return a.add(O(e))})),null===(n=e.gyms)||void 0===n||n.forEach((function(e){return o.add(O(e))})),null===(r=e.hostels)||void 0===r||r.forEach((function(e){return c.add(O(e))})),[a,o,c]}function O(e){return new ymaps.Placemark(f(e.coordinates),{hintContent:e.title,balloonContentHeader:e.title,balloonContentBody:e.description})}var j=v;n("7748");j.render=u,j.__scopeId="data-v-38cbc64e";var w=j,k=n("d4ec"),L=n("bee2"),E=(n("96cf"),n("1da1")),C=n("91a5"),R=n("2b2c"),U=function(){function e(){Object(k["a"])(this,e),this.URL_MODULE="/map",this.URL_MAP="/map"}return Object(L["a"])(e,[{key:"getLocations",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=this.URL_MODULE+this.URL_MAP,e.next=4,C["a"].get(n);case 4:return r=e.sent,console.log("loaded",r.result),e.abrupt("return",R["a"].success(null!==(t=r.result)&&void 0!==t?t:{}));case 9:return e.prev=9,e.t0=e["catch"](0),console.log("an error occurred during locations request"),e.abrupt("return",R["a"].failure(e.t0));case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),_=function(){function e(){Object(k["a"])(this,e),this.api=new U}return Object(L["a"])(e,[{key:"getLocations",value:function(){return this.api.getLocations()}}]),e}(),x=function(){function e(){Object(k["a"])(this,e),this.remoteDataSource=new _}return Object(L["a"])(e,[{key:"getLocations",value:function(){return this.remoteDataSource.getLocations()}}]),e}(),z=function(){function e(){Object(k["a"])(this,e),this.repository=new x}return Object(L["a"])(e,[{key:"getLocations",value:function(){return this.repository.getLocations()}}]),e}(),A=new z,M=Object(r["i"])({components:{YandexMap:w},setup:function(){var e=Object(r["w"])({});return A.getLocations().then((function(t){var n;console.log("locations loaded",t.tostring());var r=null===(n=t.getOrNull())||void 0===n?void 0:n.addresses;r?e.value=r:console.log("there is an error or addresses are null.","Error is",t.errorOrNull)})),{locations:e}}}),I=M;I.render=a;t["default"]=I},7748:function(e,t,n){"use strict";n("9421")},9421:function(e,t,n){}}]);
//# sourceMappingURL=chunk-a9e3a4e2.c5403e8e.js.map