(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12bf760e"],{"388f":function(e,t,a){"use strict";a("f894")},"5bba":function(e,t,a){e.exports=a.p+"img/attachment-diagonal-interface-symbol-of-paperclip.7b680923.svg"},"69ad":function(e,t,a){},d445:function(e,t,a){"use strict";a.r(t);var i=a("7a23"),n=Object(i["N"])("data-v-c377f06c");Object(i["v"])("data-v-c377f06c");var c={class:"dialogs-list"},r=Object(i["i"])("h2",{class:"heading"},"Личные сообщения",-1);Object(i["t"])();var s=n((function(e,t,a,n,s,o){var u=Object(i["A"])("DialogPreview"),d=Object(i["A"])("loader");return Object(i["s"])(),Object(i["e"])("div",c,[r,(Object(i["s"])(!0),Object(i["e"])(i["a"],null,Object(i["y"])(e.dialogs,(function(e){return Object(i["s"])(),Object(i["e"])(u,{key:e.id,dialog:e},null,8,["dialog"])})),128)),Object(i["i"])(d,{id:"loader",showing:e.isLoading},null,8,["showing"])])})),o=a("d4ec"),u=a("bee2"),d=(a("96cf"),a("1da1")),l=a("91a5"),b=a("2b2c"),g=a("9c79"),O=a("12f9"),j=function(){function e(){Object(o["a"])(this,e),this.URL_MODULE="/account",this.URL_DIALOGS="/dialogs",this.session=new O["a"]}return Object(u["a"])(e,[{key:"getDialogs",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=this.URL_MODULE+this.URL_DIALOGS,i={additionalHeaders:{sessionId:this.session.getSessionId()}},e.next=5,l["b"].get(a,i);case 5:return n=e.sent,console.log("loaded",n.result),e.abrupt("return",b["a"].success(null!==(t=n.result)&&void 0!==t?t:[]));case 10:if(e.prev=10,e.t0=e["catch"](0),401!=e.t0["statusCode"]){e.next=16;break}return e.abrupt("return",b["a"].failure(new g["a"]("Авторизируйтесь!")));case 16:return e.abrupt("return",b["a"].failure(e.t0));case 17:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),f=function(){function e(){Object(o["a"])(this,e),this.api=new j}return Object(u["a"])(e,[{key:"getDialogs",value:function(){return this.api.getDialogs()}}]),e}(),p=function(){function e(){Object(o["a"])(this,e),this.remoteDataSource=new f}return Object(u["a"])(e,[{key:"getDialogs",value:function(){return this.remoteDataSource.getDialogs()}}]),e}(),v=function(){function e(){Object(o["a"])(this,e),this.repository=new p}return Object(u["a"])(e,[{key:"getDialogs",value:function(){return this.repository.getDialogs()}}]),e}(),h=a("5bba"),m=a.n(h),w=Object(i["N"])("data-v-31b1ec18");Object(i["v"])("data-v-31b1ec18");var y={class:"receiver"},D={class:"sender"},L={id:"receiver-name"},k={key:0,id:"unread-dot"},U={class:"date"},_={id:"identity"},I={key:1,id:"name"},R={key:0,id:"attachments-icon",src:m.a};Object(i["t"])();var M=w((function(e,t){return Object(i["s"])(),Object(i["e"])("div",{class:"preview",onClick:t[1]||(t[1]=function(){return e.openDialogPage&&e.openDialogPage.apply(e,arguments)})},[Object(i["i"])("div",y,[Object(i["i"])("img",{id:"avatar",src:e.IMG_BASE_URL+e.dialog.avatarUrl},null,8,["src"])]),Object(i["i"])("div",D,[Object(i["i"])("div",null,[Object(i["i"])("span",L,Object(i["C"])(e.author),1),e.dialog.hasRead?Object(i["f"])("",!0):(Object(i["s"])(),Object(i["e"])("span",k)),Object(i["i"])("span",U,Object(i["C"])(e.dialog.date),1)]),Object(i["i"])("div",_,[e.dialog.senderImageUrl?(Object(i["s"])(),Object(i["e"])("img",{key:0,id:"avatar",src:e.IMG_BASE_URL+e.dialog.senderImageUrl},null,8,["src"])):Object(i["f"])("",!0),e.dialog.senderName?(Object(i["s"])(),Object(i["e"])("span",I,Object(i["C"])(e.dialog.senderName),1)):Object(i["f"])("",!0)]),Object(i["i"])("div",{style:{marginLeft:e.messageLeftMargin}},[e.dialog.hasAttachments?(Object(i["s"])(),Object(i["e"])("img",R)):Object(i["f"])("",!0),Object(i["i"])("span",{id:"message",innerHTML:e.dialog.message},null,8,["innerHTML"])],4)])])})),S=a("5530"),A=Object(i["j"])({props:{dialog:{type:Object,required:!0}},data:function(){return{IMG_BASE_URL:l["a"]}},methods:{openDialogPage:function(){var e=encodeURIComponent(this.dialog.dialogKey);this.$router.push("dialog?dialogKey="+e)}},setup:function(e){var t=Object(i["w"])({}),a=e.dialog,n=Object(i["c"])((function(){return a.authorName+(a.authorGroup?" – ".concat(a.authorGroup):"")})),c=Object(i["c"])((function(){return a.senderImageUrl&&a.senderName?"35px":"0px"}));return Object(S["a"])(Object(S["a"])({},Object(i["D"])(t)),{},{author:n,messageLeftMargin:c})}}),G=A;a("388f");G.render=M,G.__scopeId="data-v-31b1ec18";var N=G,x=a("2cea"),C=new v,E=Object(i["j"])({components:{DialogPreview:N,loader:x["a"]},setup:function(){var e=Object(i["w"])({dialogs:[],isLoading:!0});return C.getDialogs().then((function(t){if(e.isLoading=!1,t.isSuccess)e.dialogs=t.value;else if(t.isFailure){var a=t.errorOrNull();alert(null!==a&&void 0!==a?a:"Неизвестная ошибка")}})),e}}),P=E;a("dd8d");P.render=s,P.__scopeId="data-v-c377f06c";t["default"]=P},dd8d:function(e,t,a){"use strict";a("69ad")},f894:function(e,t,a){}}]);
//# sourceMappingURL=chunk-12bf760e.34a443af.js.map