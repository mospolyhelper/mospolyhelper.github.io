(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23e632fa"],{"15cc":function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t){var n=Object(r["A"])("YandexMap");return Object(r["s"])(),Object(r["e"])(n,{markers:e.locations},null,8,["markers"])}var o=Object(r["M"])("data-v-625c1c5c");Object(r["v"])("data-v-625c1c5c");var c={class:"map",id:"yandex-map"};Object(r["t"])();var i,u=o((function(e,t,n,a,o,i){return Object(r["s"])(),Object(r["e"])("div",c)}));n("a4d3"),n("e01a"),n("4160"),n("a9e3"),n("159b"),n("99af"),n("d3b7");(function(e){e["RU"]="ru_RU",e["EN"]="en_EN"})(i||(i={}));var s=function(e){var t=e.apiKey,n=e.lang,r=e.load,a=document.createElement("script");return a.setAttribute("src","https://api-maps.yandex.ru/2.1/?apikey=".concat(t,"&lang=").concat(n,"&load=").concat(r)),a.setAttribute("async",""),a.setAttribute("defer",""),a.setAttribute("id","ymaps-script"),document.head.appendChild(a)},l={lat:55.75396,lng:37.620393},d={apiKey:"8239b260-067a-4165-a7a4-e64e5d0c4bd2",lang:i.RU,load:"package.full",center:l,zoom:11},p=function(e){return new Promise((function(t,n){if(window.ymaps||document.getElementById("ymaps-script"))return t();var r=s(e);r.onload=function(){return ymaps.ready(t)},r.onerror=n}))},f=function(e){return[e.lat,e.lng]},b=null,v=Object(r["j"])({props:{apiKey:{type:String,default:d.apiKey},lang:{type:String,default:d.lang},load:{type:String,default:d.load},zoom:{type:Number,default:d.zoom},center:{type:Object,default:d.center},markers:{type:Object,default:{}}},setup:function(e){Object(r["q"])((function(){p(e).then((function(){var t=e.center,n=e.zoom;b=new ymaps.Map("yandex-map",{center:[t.lat,t.lng],zoom:n}),console.log("map initialized"),Object(r["J"])((function(){var t;console.log("markers in props changes observed"),null===(t=b)||void 0===t||t.geoObjects.removeAll(),O(e.markers).forEach((function(e){var t;return null===(t=b)||void 0===t?void 0:t.geoObjects.add(e)}))}))}))}))}}),m={preset:"islands#blueEducationCircleIcon"},g={preset:"islands#blueSportCircleIcon"},h={preset:"islands#blueHomeCircleIcon"},y={preset:"islands#blueCircleIcon"};function O(e){var t,n,r,a=new ymaps.GeoObjectCollection(void 0,m),o=new ymaps.GeoObjectCollection(void 0,g),c=new ymaps.GeoObjectCollection(void 0,h),i=new ymaps.GeoObjectCollection(void 0,y);for(var u in e)switch(u){case"campuses":null===(t=e[u])||void 0===t||t.forEach((function(e){return a.add(j(e))}));break;case"gyms":null===(n=e[u])||void 0===n||n.forEach((function(e){return o.add(j(e))}));break;case"hostels":null===(r=e[u])||void 0===r||r.forEach((function(e){return c.add(j(e))}));break;default:e[u].forEach((function(e){return i.add(j(e))}));break}return[a,o,c,i]}function j(e){return new ymaps.Placemark(f(e.coordinates),{hintContent:e.title,balloonContentHeader:e.title,balloonContentBody:e.description})}var w=v;n("1795");w.render=u,w.__scopeId="data-v-625c1c5c";var k=w,L=n("d4ec"),E=n("bee2"),C=(n("96cf"),n("1da1")),R=n("91a5"),U=n("2b2c"),x=function(){function e(){Object(L["a"])(this,e),this.URL_MODULE="/map",this.URL_MAP="/map"}return Object(E["a"])(e,[{key:"getLocations",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=this.URL_MODULE+this.URL_MAP,e.next=4,R["a"].get(n);case 4:return r=e.sent,console.log("loaded",r.result),e.abrupt("return",U["a"].success(null!==(t=r.result)&&void 0!==t?t:{}));case 9:return e.prev=9,e.t0=e["catch"](0),console.log("an error occurred during locations request"),e.abrupt("return",U["a"].failure(e.t0));case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),A=function(){function e(){Object(L["a"])(this,e),this.api=new x}return Object(E["a"])(e,[{key:"getLocations",value:function(){return this.api.getLocations()}}]),e}(),M=function(){function e(){Object(L["a"])(this,e),this.remoteDataSource=new A}return Object(E["a"])(e,[{key:"getLocations",value:function(){return this.remoteDataSource.getLocations()}}]),e}(),_=function(){function e(){Object(L["a"])(this,e),this.repository=new M}return Object(E["a"])(e,[{key:"getLocations",value:function(){return this.repository.getLocations()}}]),e}(),z=new _,I=Object(r["j"])({components:{YandexMap:k},setup:function(){var e=Object(r["x"])({});return z.getLocations().then((function(t){var n;console.log("locations loaded",t.tostring());var r=null===(n=t.getOrNull())||void 0===n?void 0:n.addresses;r?e.value=r:console.log("there is an error or addresses are null.","Error is",t.errorOrNull)})),{locations:e}}}),S=I;S.render=a;t["default"]=S},1795:function(e,t,n){"use strict";n("ee1b")},ee1b:function(e,t,n){}}]);
//# sourceMappingURL=chunk-23e632fa.dba9db01.js.map